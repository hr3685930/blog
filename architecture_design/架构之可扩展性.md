# 架构之可扩展性
## 分层架构
C/S 架构、B/S 架构
MVC 架构、MVP 架构
逻辑分层架构

## SOA
- 特点:
服务
ESB
松耦合

- 适用场景
soa解决的是资源的重复利用，它的拆分粒度比较大，比如财务系统跟oa系统的员工模块。
互联网企业有几种情况，
	1. 初创公司，这种公司一般会有试错的过程，需要技术快速实现业务落地，这种情况下使用SOA不适合快速敏捷迭代开发。
	2. 对于成熟的互联网业务来说，需要解决的是是高并发，高性能和高存储等一系列问题，对于这类企业来说，使用SOA拆分不能解决太多问题，还得做更加细粒度的拆分。


- 为什么互联网不用SOA?
1. 互联网企业, 通常比较年轻, 没有那么多异构系统, 技术是公司的关键;
如果有整合或者服务化的需求, 公司有人也有钱专门搞这个; 拆到重做/重构 很平常;
相反的, 传统企业, 举个例子:
某传统炼钢国企 : 有多个遗留.net系统,有几个实习生做的java系统, 有基于数据库procedure的系统;
有各种已经倒闭了的第三方企业的系统 等等;
企业领导不会有精力和想法全部推倒重来, 只会花钱请第三方 , 成本越低越好;
这个时候就需要ESB这种总线
2. 传统企业IT追求的是”需求灵活,变更快”, 而互联网企业追求性能, 传统soa 性能不佳
传统的esb ,说实话, 使用webservice 以及soap这种基于xml的技术;
Wsdl 这东西是真的难用, 难学难用难维护 ; 结构冗杂;
3. soa 这个东西很多时候只是一个概念, 而不是实践
个人觉得, 现在的微服务 , 更像是 soa 思想的一个落地 (相比esb)

## 微服务
> 微服务更加适合于快速、轻量级、基于 Web 的互联网系统，这类系统业务变化快，需要快速尝试、快速交付；同时基本都是基于 Web，虽然开发技术可能差异很大（例如，Java、C++、.NET 等），但对外接口基本都是提供 HTTP RESTful 风格的接口，无须考虑在接口层进行类似 SOA 的 ESB 那样的处理。  

- 微服务的实践
1. 服务粒度: “ 三个火枪手”原则
2. 拆分方法:
	1. 基于业务逻辑拆分
	2. 基于可扩展拆分
	3. 基于可靠性拆分
	4. 基于性能拆分
3. 基础设施:
![](%E6%9E%B6%E6%9E%84%E4%B9%8B%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/A6E58522-220B-418A-8CBF-B0E5E4820E49.png)



## 微内核
1. OSGi
2. 规则引擎


> SOA是把多个系统整合，而微服务是把单个系统拆开来，方向正好相反  

